<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALEID International Logistics - Invoice Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header Styles */
        header {
            background-color: #1a365d;
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid #e6b325;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
        }
        
        .logo {
            height: 50px;
            margin-right: 15px;
        }
        
        .company-name {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }
        
        .company-tagline {
            font-size: 14px;
            color: #ccc;
        }
        
        /* Navigation Styles */
        nav {
            background-color: #2d4a7c;
            padding: 0 30px;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
        }
        
        .nav-menu li {
            position: relative;
        }
        
        .nav-menu a {
            color: white;
            text-decoration: none;
            padding: 15px 20px;
            display: block;
            transition: background-color 0.3s;
        }
        
        .nav-menu a:hover, .nav-menu a.active {
            background-color: #1a365d;
        }
        
        .nav-menu a i {
            margin-right: 8px;
        }
        
        /* Main Content Styles */
        .main-content {
            padding: 25px;
            min-height: calc(100vh - 150px);
        }
        
        .section-title {
            font-size: 22px;
            color: #1a365d;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e6b325;
        }
        
        /* Search Panel Styles */
        .search-panel {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .filter-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .filter-group {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }
        
        .filter-group label {
            margin-right: 8px;
            font-weight: 500;
        }
        
        .search-box {
            display: flex;
            margin-bottom: 20px;
            position: relative;
        }
        
        .search-input {
            flex-grow: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
            font-size: 16px;
        }
        
        .search-button {
            background-color: #1a365d;
            color: white;
            border: none;
            padding: 0 25px;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            font-weight: 600;
        }
        
        .search-button:hover {
            background-color: #2d4a7c;
        }
        
        .suggestions-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 0 0 4px 4px;
            z-index: 100;
            max-height: 250px;
            overflow-y: auto;
            display: none;
        }
        
        .suggestion-item {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .suggestion-item:hover {
            background-color: #f5f7fa;
        }
        
        /* Table Styles */
        .table-container {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            background-color: #1a365d;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        tr:hover {
            background-color: #f9f9f9;
        }
        
        .action-btn {
            padding: 6px 12px;
            margin: 0 3px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .edit-btn {
            background-color: #e6b325;
            color: #333;
        }
        
        .pdf-btn {
            background-color: #28a745;
            color: white;
        }
        
        .delete-btn {
            background-color: #dc3545;
            color: white;
        }
        
        /* Invoice Form Styles */
        .invoice-form-container {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            display: none;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
            min-width: 200px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #1a365d;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .charges-table {
            margin: 25px 0;
        }
        
        .charges-table th {
            background-color: #2d4a7c;
        }
        
        .add-charge-btn {
            background-color: #1a365d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 15px;
        }
        
        .add-charge-btn:hover {
            background-color: #2d4a7c;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .save-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
        }
        
        .cancel-btn {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
        }
        
        /* Footer Styles */
        footer {
            background-color: #1a365d;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }
        
        .footer-info {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .footer-section {
            margin: 10px;
        }
        
        .footer-section h4 {
            color: #e6b325;
            margin-bottom: 10px;
        }
        
        .copyright {
            padding-top: 15px;
            border-top: 1px solid #2d4a7c;
            font-size: 14px;
            color: #ccc;
        }
        
        /* Status Indicators */
        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-completed {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-in-progress {
            background-color: #cce5ff;
            color: #004085;
        }
        
        /* Responsive Styles */
        @media (max-width: 1024px) {
            .nav-menu {
                flex-wrap: wrap;
            }
            
            .form-row {
                flex-direction: column;
            }
            
            .form-group {
                min-width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .search-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .filter-options {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .footer-info {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo-container">
            <div class="logo-placeholder">
                <div style="background-color: #e6b325; color: #1a365d; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px; border-radius: 5px;">AL</div>
            </div>
            <div>
                <div class="company-name">ALEID INTERNATIONAL LOGISTICS</div>
                <div class="company-tagline">Global Shipping & Logistics Solutions</div>
            </div>
        </div>
        <div>
            <div style="font-size: 14px; color: #ccc;">Invoice Generator System</div>
            <div style="font-size: 12px; color: #e6b325;">Version 2.1</div>
        </div>
    </header>
    
    <!-- Navigation Menu -->
    <nav>
        <ul class="nav-menu">
            <li><a href="#" class="active"><i class="fas fa-home"></i> Dashboard</a></li>
            <li><a href="#"><i class="fas fa-file-invoice"></i> Invoices</a></li>
            <li><a href="#"><i class="fas fa-search"></i> Job Card Search</a></li>
            <li><a href="#"><i class="fas fa-plus-circle"></i> Create New</a></li>
            <li><a href="#"><i class="fas fa-chart-bar"></i> Reports</a></li>
            <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
        </ul>
    </nav>
    
    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Search Panel -->
            <div class="search-panel">
                <div class="search-header">
                    <h2 class="section-title">Search Job Cards</h2>
                    <button class="add-charge-btn" id="createNewBtn"><i class="fas fa-plus-circle"></i> Create New Invoice Card</button>
                </div>
                
                <div class="filter-options">
                    <div class="filter-group">
                        <input type="checkbox" id="filterBayan" checked>
                        <label for="filterBayan">Bayan No</label>
                    </div>
                    <div class="filter-group">
                        <input type="checkbox" id="filterInvoice" checked>
                        <label for="filterInvoice">Invoice No</label>
                    </div>
                    <div class="filter-group">
                        <input type="checkbox" id="filterCustomerRef">
                        <label for="filterCustomerRef">Customer Reference</label>
                    </div>
                    <div class="filter-group">
                        <input type="checkbox" id="filterPortArrival">
                        <label for="filterPortArrival">Port of Arrival</label>
                    </div>
                    <div class="filter-group">
                        <input type="checkbox" id="filterShipper" checked>
                        <label for="filterShipper">Shipper</label>
                    </div>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="Type to search job cards...">
                    <button class="search-button" id="searchBtn"><i class="fas fa-search"></i> Search</button>
                    <div class="suggestions-dropdown" id="suggestionsDropdown">
                        <!-- Suggestions will be populated here -->
                    </div>
                </div>
                
                <div style="font-size: 14px; color: #666;">
                    <i class="fas fa-info-circle"></i> Select filters and type keywords to search job cards. Suggestions will appear as you type.
                </div>
            </div>
            
            <!-- Recent Job Cards Table -->
            <div class="table-container">
                <h2 class="section-title">Recent Job Cards</h2>
                <table id="jobCardsTable">
                    <thead>
                        <tr>
                            <th>Job No</th>
                            <th>Bayan No</th>
                            <th>Invoice No</th>
                            <th>Customer</th>
                            <th>Shipper</th>
                            <th>Port of Arrival</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="jobCardsTableBody">
                        <!-- Job cards will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Invoice Form (Initially Hidden) -->
            <div class="invoice-form-container" id="invoiceFormContainer">
                <h2 class="section-title" id="formTitle">Create Invoice</h2>
                
                <form id="invoiceForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="customer">Customer</label>
                            <input type="text" class="form-control" id="customer" value="DOWELL SCHLUMBERGER CORPORATION">
                        </div>
                        <div class="form-group">
                            <label for="invoiceNo">Invoice No</label>
                            <input type="text" class="form-control" id="invoiceNo" value="INV/2025/08231">
                        </div>
                        <div class="form-group">
                            <label for="invoiceDate">Invoice Date</label>
                            <input type="date" class="form-control" id="invoiceDate" value="2025-11-10">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="jobNo">Job No</label>
                            <input type="text" class="form-control" id="jobNo" value="ROA-E-2025-00382">
                        </div>
                        <div class="form-group">
                            <label for="bayanNo">Bayan No</label>
                            <input type="text" class="form-control" id="bayanNo" value="40984">
                        </div>
                        <div class="form-group">
                            <label for="bayanDate">Bayan Date</label>
                            <input type="date" class="form-control" id="bayanDate" value="2025-10-30">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="truckWaybill">Truck Way Bill No</label>
                            <input type="text" class="form-control" id="truckWaybill" value="EXHB48979/NUVV25">
                        </div>
                        <div class="form-group">
                            <label for="portDeparture">Port of Departure</label>
                            <input type="text" class="form-control" id="portDeparture" value="Kuwait">
                        </div>
                        <div class="form-group">
                            <label for="portArrival">Port of Arrival</label>
                            <input type="text" class="form-control" id="portArrival" value="Saudi Arabia">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="shipper">Shipper Name</label>
                            <input type="text" class="form-control" id="shipper" value="MUSTAFA KARAM & SONS GEN. TRAD. & CONT. CO. WLL">
                        </div>
                        <div class="form-group">
                            <label for="shipperRef">Shipper Ref. No</label>
                            <input type="text" class="form-control" id="shipperRef" value="TRZSKWSA0000300">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="grossWeight">Gross Weight (kg)</label>
                            <input type="number" class="form-control" id="grossWeight" value="16500">
                        </div>
                        <div class="form-group">
                            <label for="packages">Packages</label>
                            <input type="number" class="form-control" id="packages" value="1">
                        </div>
                        <div class="form-group">
                            <label for="eta">ETA</label>
                            <input type="date" class="form-control" id="eta" value="2025-10-25">
                        </div>
                    </div>
                    
                    <!-- Charges Table -->
                    <h3 style="margin: 25px 0 15px 0; color: #1a365d;">Charges</h3>
                    <div class="table-container">
                        <table class="charges-table" id="chargesTable">
                            <thead>
                                <tr>
                                    <th>Sr. No</th>
                                    <th>Charges</th>
                                    <th>Qty</th>
                                    <th>Amount/Unit</th>
                                    <th>Amt In KWD</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="chargesTableBody">
                                <!-- Charges will be populated here -->
                            </tbody>
                        </table>
                        
                        <button type="button" class="add-charge-btn" id="addChargeBtn">
                            <i class="fas fa-plus"></i> Add Charge
                        </button>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="totalKWD">Total in KWD</label>
                            <input type="text" class="form-control" id="totalKWD" value="82.710" readonly>
                        </div>
                        <div class="form-group">
                            <label for="amountWords">Amount in Words</label>
                            <input type="text" class="form-control" id="amountWords" value="Eighty-Two Dinar and Seven Hundred Ten Fils only" readonly>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="cancel-btn" id="cancelBtn">Cancel</button>
                        <button type="button" class="save-btn" id="saveBtn"><i class="fas fa-save"></i> Save Invoice</button>
                    </div>
                </form>
            </div>
            
            <!-- Recent Invoices Table -->
            <div class="table-container" id="invoicesTableContainer">
                <h2 class="section-title">Recent Invoices Created</h2>
                <table id="invoicesTable">
                    <thead>
                        <tr>
                            <th>Invoice No</th>
                            <th>Date</th>
                            <th>Customer</th>
                            <th>Job No</th>
                            <th>Total Amount (KWD)</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="invoicesTableBody">
                        <!-- Invoices will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="footer-info">
            <div class="footer-section">
                <h4>Contact Info</h4>
                <p>Office 10, M Floor, Tala Mall, Street 79, Plot 20, Dajeej, 80000, Farwaniya, Kuwait</p>
                <p>Tel: +965 24311005/6</p>
                <p>Email: sales@aleidlogistics.com</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <p><a href="#" style="color: #e6b325;">Dashboard</a></p>
                <p><a href="#" style="color: #e6b325;">Create Invoice</a></p>
                <p><a href="#" style="color: #e6b325;">Reports</a></p>
            </div>
            <div class="footer-section">
                <h4>Bank Details</h4>
                <p>A/C Name: ALEID INT'LOGISTICS CO.</p>
                <p>Bank: COMMERCIAL BANK OF KUWAIT</p>
                <p>A/C No.: 9462803013</p>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 ALEID International Logistics Company. All rights reserved.
        </div>
    </footer>
    <script src ="scripts/invoice.js"></script>

    <script>
        // Sample job card data
        const jobCards = [
            {
                id: 1,
                jobNo: "ROA-E-2025-00382",
                bayanNo: "40984",
                invoiceNo: "INV/2025/08231",
                customer: "DOWELL SCHLUMBERGER CORPORATION",
                shipper: "MUSTAFA KARAM & SONS GEN. TRAD. & CONT. CO. WLL",
                portArrival: "Saudi Arabia",
                status: "completed",
                truckWaybill: "EXHB48979/NUVV25",
                portDeparture: "Kuwait",
                shipperRef: "TRZSKWSA0000300",
                grossWeight: 16500,
                packages: 1,
                eta: "2025-10-25",
                etd: "2025-10-23",
                charges: [
                    { description: "CUSTOMS CLEARANCE SERVICE CHARGE (NUWASIB)", qty: 1, unitAmount: 30.000, amount: 30.00 },
                    { description: "INSPECTION CHARGES", qty: 1, unitAmount: 10.000, amount: 10.00 },
                    { description: "GLOBAL CLEARINGHOUSE SYSTEMS CHARGES", qty: 1, unitAmount: 27.210, amount: 27.21 },
                    { description: "CHAMBER OF COMMERCE LEGALIZATION CHARGES", qty: 1, unitAmount: 10.500, amount: 10.50 },
                    { description: "CHAMBER OF COMMERCE LEGALIZATION SERVICE CHARGES", qty: 1, unitAmount: 5.000, amount: 5.00 }
                ]
            },
            {
                id: 2,
                jobNo: "ROA-E-2025-00415",
                bayanNo: "41205",
                invoiceNo: "INV/2025/08245",
                customer: "KUWAIT NATIONAL PETROLEUM COMPANY",
                shipper: "AL-JABER TRANSPORT CO.",
                portArrival: "UAE",
                status: "in-progress",
                truckWaybill: "EXHB51234/DUBAI25",
                portDeparture: "Kuwait",
                shipperRef: "TRZSKWAE0000450",
                grossWeight: 22000,
                packages: 2,
                eta: "2025-11-05",
                etd: "2025-11-01",
                charges: [
                    { description: "CUSTOMS CLEARANCE SERVICE CHARGE (NUWASIB)", qty: 1, unitAmount: 30.000, amount: 30.00 },
                    { description: "INSPECTION CHARGES", qty: 2, unitAmount: 10.000, amount: 20.00 }
                ]
            },
            {
                id: 3,
                jobNo: "ROA-E-2025-00395",
                bayanNo: "41022",
                invoiceNo: "INV/2025/08212",
                customer: "EQUATE PETROCHEMICAL COMPANY",
                shipper: "GULF SUPPLY COMPANY WLL",
                portArrival: "Qatar",
                status: "pending",
                truckWaybill: "EXHB49876/QATR25",
                portDeparture: "Kuwait",
                shipperRef: "TRZSKWQA0000385",
                grossWeight: 18500,
                packages: 1,
                eta: "2025-11-02",
                etd: "2025-10-28",
                charges: [
                    { description: "CUSTOMS CLEARANCE SERVICE CHARGE (NUWASIB)", qty: 1, unitAmount: 30.000, amount: 30.00 },
                    { description: "GLOBAL CLEARINGHOUSE SYSTEMS CHARGES", qty: 1, unitAmount: 27.210, amount: 27.21 }
                ]
            },
            {
                id: 4,
                jobNo: "ROA-E-2025-00402",
                bayanNo: "41118",
                invoiceNo: "INV/2025/08233",
                customer: "HALLIBURTON WORLDWIDE LTD",
                shipper: "AL-MULLA INTERNATIONAL TRADING",
                portArrival: "Oman",
                status: "completed",
                truckWaybill: "EXHB50321/OMAN25",
                portDeparture: "Kuwait",
                shipperRef: "TRZSKWOM0000412",
                grossWeight: 15000,
                packages: 1,
                eta: "2025-10-30",
                etd: "2025-10-26",
                charges: [
                    { description: "CUSTOMS CLEARANCE SERVICE CHARGE (NUWASIB)", qty: 1, unitAmount: 30.000, amount: 30.00 },
                    { description: "INSPECTION CHARGES", qty: 1, unitAmount: 10.000, amount: 10.00 },
                    { description: "CHAMBER OF COMMERCE LEGALIZATION CHARGES", qty: 1, unitAmount: 10.500, amount: 10.50 }
                ]
            }
        ];

        // Sample invoice data
        let invoices = [
            {
                id: 1,
                invoiceNo: "INV/2025/08231",
                date: "2025-11-10",
                customer: "DOWELL SCHLUMBERGER CORPORATION",
                jobNo: "ROA-E-2025-00382",
                totalAmount: "82.710",
                status: "Paid"
            },
            {
                id: 2,
                invoiceNo: "INV/2025/08233",
                date: "2025-11-08",
                customer: "HALLIBURTON WORLDWIDE LTD",
                jobNo: "ROA-E-2025-00402",
                totalAmount: "50.500",
                status: "Paid"
            }
        ];

        // Predefined charge options
        const chargeOptions = [
            "CUSTOMS CLEARANCE SERVICE CHARGE (NUWASIB)",
            "INSPECTION CHARGES",
            "GLOBAL CLEARINGHOUSE SYSTEMS CHARGES",
            "CHAMBER OF COMMERCE LEGALIZATION CHARGES",
            "CHAMBER OF COMMERCE LEGALIZATION SERVICE CHARGES",
            "TRANSPORTATION CHARGES",
            "DOCUMENTATION CHARGES",
            "STORAGE CHARGES",
            "HANDLING CHARGES"
        ];

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const suggestionsDropdown = document.getElementById('suggestionsDropdown');
        const jobCardsTableBody = document.getElementById('jobCardsTableBody');
        const invoicesTableBody = document.getElementById('invoicesTableBody');
        const invoiceFormContainer = document.getElementById('invoiceFormContainer');
        const createNewBtn = document.getElementById('createNewBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const saveBtn = document.getElementById('saveBtn');
        const addChargeBtn = document.getElementById('addChargeBtn');
        const chargesTableBody = document.getElementById('chargesTableBody');
        const totalKWD = document.getElementById('totalKWD');
        const formTitle = document.getElementById('formTitle');
        
        // Checkbox filters
        const filterBayan = document.getElementById('filterBayan');
        const filterInvoice = document.getElementById('filterInvoice');
        const filterCustomerRef = document.getElementById('filterCustomerRef');
        const filterPortArrival = document.getElementById('filterPortArrival');
        const filterShipper = document.getElementById('filterShipper');

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderJobCardsTable();
            renderInvoicesTable();
            
            // Set up event listeners
            searchInput.addEventListener('input', handleSearchInput);
            searchBtn.addEventListener('click', performSearch);
            createNewBtn.addEventListener('click', showInvoiceForm);
            cancelBtn.addEventListener('click', hideInvoiceForm);
            saveBtn.addEventListener('click', saveInvoice);
            addChargeBtn.addEventListener('click', addChargeRow);
            
            // Initialize charges table with default charges
            initializeChargesTable();
        });

        // Render job cards table
        function renderJobCardsTable() {
            jobCardsTableBody.innerHTML = '';
            
            jobCards.forEach(card => {
                const statusClass = `status-${card.status}`;
                const statusText = card.status.replace('-', ' ').toUpperCase();
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${card.jobNo}</td>
                    <td>${card.bayanNo}</td>
                    <td>${card.invoiceNo}</td>
                    <td>${card.customer}</td>
                    <td>${card.shipper.substring(0, 30)}...</td>
                    <td>${card.portArrival}</td>
                    <td><span class="status ${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="action-btn edit-btn" data-id="${card.id}"><i class="fas fa-edit"></i> Edit</button>
                        <button class="action-btn pdf-btn" data-id="${card.id}"><i class="fas fa-file-pdf"></i> PDF</button>
                    </td>
                `;
                
                jobCardsTableBody.appendChild(row);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    editJobCard(id);
                });
            });
            
            document.querySelectorAll('.pdf-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    generatePDF(id);
                });
            });
        }

        // Render invoices table
        function renderInvoicesTable() {
            invoicesTableBody.innerHTML = '';
            
            if (invoices.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="7" style="text-align: center; padding: 30px;">No invoices created yet. Create your first invoice!</td>`;
                invoicesTableBody.appendChild(row);
                return;
            }
            
            invoices.forEach(invoice => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${invoice.invoiceNo}</td>
                    <td>${invoice.date}</td>
                    <td>${invoice.customer}</td>
                    <td>${invoice.jobNo}</td>
                    <td>${invoice.totalAmount} KWD</td>
                    <td><span class="status status-completed">${invoice.status}</span></td>
                    <td>
                        <button class="action-btn pdf-btn" data-invoice-id="${invoice.id}"><i class="fas fa-file-pdf"></i> PDF</button>
                        <button class="action-btn delete-btn" data-invoice-id="${invoice.id}"><i class="fas fa-trash"></i></button>
                    </td>
                `;
                
                invoicesTableBody.appendChild(row);
            });
            
            // Add event listeners to invoice action buttons
            document.querySelectorAll('.pdf-btn[data-invoice-id]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-invoice-id'));
                    generateInvoicePDF(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-invoice-id'));
                    deleteInvoice(id);
                });
            });
        }

        // Handle search input with suggestions
        function handleSearchInput() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (searchTerm.length < 2) {
                suggestionsDropdown.style.display = 'none';
                return;
            }
            
            const activeFilters = getActiveFilters();
            const suggestions = getSearchSuggestions(searchTerm, activeFilters);
            
            if (suggestions.length === 0) {
                suggestionsDropdown.style.display = 'none';
                return;
            }
            
            // Display suggestions
            suggestionsDropdown.innerHTML = '';
            suggestions.forEach(suggestion => {
                const suggestionItem = document.createElement('div');
                suggestionItem.className = 'suggestion-item';
                suggestionItem.textContent = suggestion.text;
                suggestionItem.setAttribute('data-id', suggestion.id);
                
                suggestionItem.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    selectJobCard(id);
                    suggestionsDropdown.style.display = 'none';
                    searchInput.value = '';
                });
                
                suggestionsDropdown.appendChild(suggestionItem);
            });
            
            suggestionsDropdown.style.display = 'block';
        }

        // Get active filter checkboxes
        // Add this function to your invoice.js file
function getActiveFilter() {
    if (document.getElementById('filterBayan').checked) return 'bayanNo';
    if (document.getElementById('filterInvoice').checked) return 'invoiceNo';
    if (document.getElementById('filterCustomerRef').checked) return 'customerRef';
    if (document.getElementById('filterPortArrival').checked) return 'portArrival';
    if (document.getElementById('filterShipper').checked) return 'shipper';
    return 'all';
}

        // Get search suggestions based on active filters
        function getSearchSuggestions(searchTerm, activeFilters) {
            const suggestions = [];
            
            jobCards.forEach(card => {
                // Check each active filter field
                activeFilters.forEach(filter => {
                    let fieldValue = '';
                    
                    switch(filter) {
                        case 'bayanNo':
                            fieldValue = card.bayanNo.toLowerCase();
                            break;
                        case 'invoiceNo':
                            fieldValue = card.invoiceNo.toLowerCase();
                            break;
                        case 'customerRef':
                            // Using customer name as proxy for customer reference
                            fieldValue = card.customer.toLowerCase();
                            break;
                        case 'portArrival':
                            fieldValue = card.portArrival.toLowerCase();
                            break;
                        case 'shipper':
                            fieldValue = card.shipper.toLowerCase();
                            break;
                    }
                    
                    if (fieldValue.includes(searchTerm)) {
                        suggestions.push({
                            id: card.id,
                            text: `${card.jobNo} - ${card.customer} (${filter}: ${card[filter] || card.customer})`
                        });
                    }
                });
            });
            
            // Remove duplicates
            return suggestions.filter((suggestion, index, self) => 
                index === self.findIndex((s) => s.id === suggestion.id)
            );
        }

        // Perform search (filter job cards table)
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (searchTerm === '') {
                renderJobCardsTable();
                return;
            }
            
            const activeFilters = getActiveFilters();
            const filteredCards = jobCards.filter(card => {
                // Check if any of the active filter fields contain the search term
                return activeFilters.some(filter => {
                    let fieldValue = '';
                    
                    switch(filter) {
                        case 'bayanNo':
                            fieldValue = card.bayanNo.toLowerCase();
                            break;
                        case 'invoiceNo':
                            fieldValue = card.invoiceNo.toLowerCase();
                            break;
                        case 'customerRef':
                            fieldValue = card.customer.toLowerCase();
                            break;
                        case 'portArrival':
                            fieldValue = card.portArrival.toLowerCase();
                            break;
                        case 'shipper':
                            fieldValue = card.shipper.toLowerCase();
                            break;
                    }
                    
                    return fieldValue.includes(searchTerm);
                });
            });
            
            // Render filtered cards
            renderFilteredJobCards(filteredCards);
        }

        // Render filtered job cards
        function renderFilteredJobCards(filteredCards) {
            jobCardsTableBody.innerHTML = '';
            
            if (filteredCards.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `<td colspan="8" style="text-align: center; padding: 30px;">No job cards found matching your search criteria.</td>`;
                jobCardsTableBody.appendChild(row);
                return;
            }
            
            filteredCards.forEach(card => {
                const statusClass = `status-${card.status}`;
                const statusText = card.status.replace('-', ' ').toUpperCase();
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${card.jobNo}</td>
                    <td>${card.bayanNo}</td>
                    <td>${card.invoiceNo}</td>
                    <td>${card.customer}</td>
                    <td>${card.shipper.substring(0, 30)}...</td>
                    <td>${card.portArrival}</td>
                    <td><span class="status ${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="action-btn edit-btn" data-id="${card.id}"><i class="fas fa-edit"></i> Edit</button>
                        <button class="action-btn pdf-btn" data-id="${card.id}"><i class="fas fa-file-pdf"></i> PDF</button>
                    </td>
                `;
                
                jobCardsTableBody.appendChild(row);
            });
            
            // Re-add event listeners
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    editJobCard(id);
                });
            });
            
            document.querySelectorAll('.pdf-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    generatePDF(id);
                });
            });
        }

        // Select a job card from search suggestions
        function selectJobCard(id) {
            const card = jobCards.find(c => c.id === id);
            if (!card) return;
            
            // Fill the form with job card data
            fillInvoiceForm(card);
            showInvoiceForm();
        }

        // Edit job card
        function editJobCard(id) {
            const card = jobCards.find(c => c.id === id);
            if (!card) return;
            
            fillInvoiceForm(card);
            formTitle.textContent = 'Edit Invoice';
            showInvoiceForm();
        }

        // Fill invoice form with job card data
        function fillInvoiceForm(card) {
            document.getElementById('customer').value = card.customer;
            document.getElementById('invoiceNo').value = card.invoiceNo;
            document.getElementById('jobNo').value = card.jobNo;
            document.getElementById('bayanNo').value = card.bayanNo;
            document.getElementById('truckWaybill').value = card.truckWaybill;
            document.getElementById('portDeparture').value = card.portDeparture;
            document.getElementById('portArrival').value = card.portArrival;
            document.getElementById('shipper').value = card.shipper;
            document.getElementById('shipperRef').value = card.shipperRef;
            document.getElementById('grossWeight').value = card.grossWeight;
            document.getElementById('packages').value = card.packages;
            
            // Set dates
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('invoiceDate').value = today;
            document.getElementById('bayanDate').value = card.bayanDate || today;
            document.getElementById('eta').value = card.eta;
            
            // Set charges
            renderChargesTable(card.charges);
            
            // Calculate total
            updateTotal();
        }

        // Show invoice form
        function showInvoiceForm() {
            invoiceFormContainer.style.display = 'block';
            window.scrollTo({
                top: invoiceFormContainer.offsetTop - 100,
                behavior: 'smooth'
            });
        }

        // Hide invoice form
        function hideInvoiceForm() {
            invoiceFormContainer.style.display = 'none';
            formTitle.textContent = 'Create Invoice';
            // Reset form to default values
            initializeChargesTable();
        }

        // Initialize charges table with default charges
        function initializeChargesTable() {
            const defaultCharges = [
                { description: "CUSTOMS CLEARANCE SERVICE CHARGE (NUWASIB)", qty: 1, unitAmount: 30.000, amount: 30.00 },
                { description: "INSPECTION CHARGES", qty: 1, unitAmount: 10.000, amount: 10.00 },
                { description: "GLOBAL CLEARINGHOUSE SYSTEMS CHARGES", qty: 1, unitAmount: 27.210, amount: 27.21 }
            ];
            
            renderChargesTable(defaultCharges);
            updateTotal();
        }

        // Render charges table
        function renderChargesTable(charges) {
            chargesTableBody.innerHTML = '';
            
            charges.forEach((charge, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>
                        <select class="form-control charge-description">
                            ${chargeOptions.map(option => 
                                `<option value="${option}" ${option === charge.description ? 'selected' : ''}>${option}</option>`
                            ).join('')}
                        </select>
                    </td>
                    <td><input type="number" class="form-control charge-qty" value="${charge.qty}" min="1" step="1"></td>
                    <td><input type="number" class="form-control charge-unit-amount" value="${charge.unitAmount}" min="0" step="0.001"></td>
                    <td><input type="text" class="form-control charge-amount" value="${charge.amount.toFixed(3)}" readonly></td>
                    <td><button type="button" class="action-btn delete-btn remove-charge"><i class="fas fa-trash"></i></button></td>
                `;
                
                chargesTableBody.appendChild(row);
            });
            
            // Add event listeners to charge inputs
            addChargeEventListeners();
        }

        // Add charge row
        function addChargeRow() {
            const newRow = document.createElement('tr');
            const rowCount = chargesTableBody.children.length + 1;
            
            newRow.innerHTML = `
                <td>${rowCount}</td>
                <td>
                    <select class="form-control charge-description">
                        ${chargeOptions.map(option => `<option value="${option}">${option}</option>`).join('')}
                    </select>
                </td>
                <td><input type="number" class="form-control charge-qty" value="1" min="1" step="1"></td>
                <td><input type="number" class="form-control charge-unit-amount" value="0.000" min="0" step="0.001"></td>
                <td><input type="text" class="form-control charge-amount" value="0.000" readonly></td>
                <td><button type="button" class="action-btn delete-btn remove-charge"><i class="fas fa-trash"></i></button></td>
            `;
            
            chargesTableBody.appendChild(newRow);
            
            // Add event listeners to the new row
            addChargeEventListenersToRow(newRow);
        }

        // Add event listeners to charge inputs
        function addChargeEventListeners() {
            // Remove charge buttons
            document.querySelectorAll('.remove-charge').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.closest('tr').remove();
                    updateRowNumbers();
                    updateTotal();
                });
            });
            
            // Quantity and unit amount inputs
            document.querySelectorAll('.charge-qty, .charge-unit-amount').forEach(input => {
                input.addEventListener('input', updateChargeAmount);
            });
        }

        // Add event listeners to a specific row
        function addChargeEventListenersToRow(row) {
            // Remove charge button
            row.querySelector('.remove-charge').addEventListener('click', function() {
                this.closest('tr').remove();
                updateRowNumbers();
                updateTotal();
            });
            
            // Quantity and unit amount inputs
            row.querySelectorAll('.charge-qty, .charge-unit-amount').forEach(input => {
                input.addEventListener('input', updateChargeAmount);
            });
        }

        // Update charge amount when qty or unit amount changes
        function updateChargeAmount() {
            const row = this.closest('tr');
            const qty = parseFloat(row.querySelector('.charge-qty').value) || 0;
            const unitAmount = parseFloat(row.querySelector('.charge-unit-amount').value) || 0;
            const amount = qty * unitAmount;
            
            row.querySelector('.charge-amount').value = amount.toFixed(3);
            updateTotal();
        }

        // Update row numbers in charges table
        function updateRowNumbers() {
            const rows = chargesTableBody.querySelectorAll('tr');
            rows.forEach((row, index) => {
                row.cells[0].textContent = index + 1;
            });
        }

        // Update total amount
        function updateTotal() {
            let total = 0;
            
            document.querySelectorAll('.charge-amount').forEach(input => {
                total += parseFloat(input.value) || 0;
            });
            
            totalKWD.value = total.toFixed(3);
            
            // Update amount in words
            updateAmountInWords(total);
        }

        // Convert number to words (simplified version)
        function updateAmountInWords(amount) {
            const wholePart = Math.floor(amount);
            const fractionalPart = Math.round((amount - wholePart) * 1000);
            
            // Convert whole part to words
            const wholeWords = convertNumberToWords(wholePart);
            
            // Convert fractional part to words
            const fractionalWords = convertNumberToWords(fractionalPart);
            
            // Build the final string
            let words = '';
            
            if (wholePart > 0) {
                words += `${wholeWords} Dinar`;
                if (wholePart !== 1) words += 's';
            }
            
            if (fractionalPart > 0) {
                if (wholePart > 0) words += ' and ';
                words += `${fractionalWords} Fils`;
            }
            
            if (words === '') {
                words = 'Zero Dinar';
            }
            
            words += ' only';
            
            // Capitalize first letter
            words = words.charAt(0).toUpperCase() + words.slice(1);
            
            document.getElementById('amountWords').value = words;
        }

        // Simplified number to words conversion
        function convertNumberToWords(num) {
            if (num === 0) return 'zero';
            
            const ones = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];
            const teens = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
            const tens = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];
            const thousands = ['', 'thousand', 'million', 'billion'];
            
            if (num < 10) return ones[num];
            if (num < 20) return teens[num - 10];
            if (num < 100) return tens[Math.floor(num / 10)] + (num % 10 !== 0 ? '-' + ones[num % 10] : '');
            
            // For simplicity, we'll return a basic representation for larger numbers
            return num.toString();
        }

        // Save invoice
        function saveInvoice() {
            // Collect form data
            const invoiceData = {
                id: invoices.length + 1,
                invoiceNo: document.getElementById('invoiceNo').value,
                date: document.getElementById('invoiceDate').value,
                customer: document.getElementById('customer').value,
                jobNo: document.getElementById('jobNo').value,
                bayanNo: document.getElementById('bayanNo').value,
                truckWaybill: document.getElementById('truckWaybill').value,
                portDeparture: document.getElementById('portDeparture').value,
                portArrival: document.getElementById('portArrival').value,
                shipper: document.getElementById('shipper').value,
                shipperRef: document.getElementById('shipperRef').value,
                grossWeight: document.getElementById('grossWeight').value,
                packages: document.getElementById('packages').value,
                eta: document.getElementById('eta').value,
                totalAmount: totalKWD.value,
                status: 'Paid'
            };
            
            // Collect charges
            const charges = [];
            document.querySelectorAll('#chargesTableBody tr').forEach(row => {
                charges.push({
                    description: row.querySelector('.charge-description').value,
                    qty: parseFloat(row.querySelector('.charge-qty').value) || 0,
                    unitAmount: parseFloat(row.querySelector('.charge-unit-amount').value) || 0,
                    amount: parseFloat(row.querySelector('.charge-amount').value) || 0
                });
            });
            
            invoiceData.charges = charges;
            
            // Add to invoices array
            invoices.unshift(invoiceData);
            
            // Update UI
            renderInvoicesTable();
            hideInvoiceForm();
            
            // Show success message
            alert(`Invoice ${invoiceData.invoiceNo} saved successfully!`);
            
            // In a real application, you would send this data to a backend server
            console.log('Invoice data to save:', invoiceData);
        }

        // Generate PDF for job card
        function generatePDF(id) {
            const card = jobCards.find(c => c.id === id);
            if (!card) return;
            
            alert(`Generating PDF for Job Card: ${card.jobNo}\n\nIn a real application, this would generate a PDF file with the invoice format shown in the image.`);
            
            // In a real application, you would use a library like jsPDF or html2pdf
            // to generate a PDF with the exact format shown in the image
        }

        // Generate PDF for invoice
        function generateInvoicePDF(id) {
            const invoice = invoices.find(i => i.id === id);
            if (!invoice) return;
            
            alert(`Generating PDF for Invoice: ${invoice.invoiceNo}\n\nThis would create a PDF with the exact format shown in the image, including company logo, details, and charges.`);
            
            // In a real application, you would:
            // 1. Create a PDF with the exact structure from the image
            // 2. Include the company logo and details from the header
            // 3. Add all invoice details from the form
            // 4. Format the charges table exactly as shown
            // 5. Include the bank details and footer information
            // 6. Save the PDF file with a meaningful name
        }

        // Delete invoice
        function deleteInvoice(id) {
            if (confirm('Are you sure you want to delete this invoice?')) {
                invoices = invoices.filter(invoice => invoice.id !== id);
                renderInvoicesTable();
            }
        }
    </script>
</body>
</html>